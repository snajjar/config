var DualBox = require('@dualbox/dualbox');
var description = require('./package.json');

var DualboxTypesAll3D = require('@dualbox/dualbox-type-all3d');

/**
 *  A simple number addition module for DualBox
 *  @constructor
 *  @extends {DualBox.Module}
 */
var FreeFormula4 = function(attrs){
    DualBox.Module.call(this, description, attrs);
    this.parallel = false;
    this.async = false;
};
FreeFormula4.prototype = Object.create(DualBox.Module.prototype);
FreeFormula4.prototype.constructor = FreeFormula4;

// [Abstract] See DualBox.Module
FreeFormula4.prototype.compute = function(input, response){

    var a = input.a;
    var b = input.b;
    var c = input.c;
    var d = input.d;
    var x = 0;
    try {
       x = eval(input.formula);
    }
    catch (e) {
        throw new DualBox.errors.RuntimeError("Error during free formula evaluation : " + e.message);
    }
    var output = {
        x : x
    };

    response.send(output);
};

module.exports = FreeFormula4;

