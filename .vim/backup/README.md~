Installation:

1) Install yarn if you still haven't got it, and preferably configure it to use NPM's registry
https://yarnpkg.com/en/docs/install
yarn config set registry https://registry.npmjs.org/

2) Preferably, configure yarn (like for npm) to use a directory you have full access to as global
mkdir -p ~/npm
npm config set prefix ~/npm/
yarn config set prefix ~/npm/

3) Clone the repository
git clone https://snajjar@bitbucket.org/dualbox/dualbox

3) Install the gulp, browserify and babel executables via npm
yarn global add gulp browserify @babel/cli eslint

You can check if that works by trying to launch gulp, babel and browserify from console

Max Note :
  - When not setting any prefix : on windows I had to add
    C:\Users\maxim\AppData\Local\Yarn\config\global\node_modules\.bin
    to my Path in order to be able to launch gulp...
  - When setting a prefix, I had to add <prefix\bin


4) Install every npm package needed
cd dualbox && yarn --ignore-engines

5) Create a .dualboxrc file and add in it the path to all extra working folders you would like to add
touch .dualboxrc
echo /path/to/a/workspace >> .dualboxrc
echo /path/to/another/workspace >> .dualboxrc

6) Install and link dpm
cd dualbox-dpm
yarn --ignore-engines && yarn link --ignore-engines

7) Check that the dpm client is installed correctly
dpm

Note DEPRECATED (au dernier essai en date ça marchait): chez moi sur windows dpm n'est pas trouvé après toutes ces étapes.
Je dois ajouter un dpm.cmd et dpm dans le répertoire C:\Users\maxim\AppData\Local\Yarn\config\global\node_modules\.bin
Sur le même modèle que les fichiers gulp et gulp.cmd en replacant ..\gulp\bin\gulp.js par ..\..\..\link\dualbox-dpm\bin\dpm.js

Note bis : dpm était pas requirable depuis node il fallait set le node_path à prefix\node_modules

8) Proceed to the dualbox installation via gulp (could be long)
gulp setup && gulp install && gulp repair
if you are overriding a previous installation, use gulp install -x


9) Check that everything works as intended
gulp build && gulp build-editor

10) Pour pouvoir bump, il faut npm login avec les identifiants Dualbox. Voir le document privé pour ça.

Note sur le bump : il faut faire une install dans dualbox-dpm et relinker les modules dualbox avec "yarn link @dualbox\dualbox" car ils sont installés en dur par défault.
Ensuite, sur Windows, pb rencontré : le node path est pas bien setté car pointe sur npm/node_modules et yarn install aussi dans npm/lib/node_modules. En mettant les deux dans Node_PATH ça passe.



