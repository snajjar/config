import { $, env, UIComponent } from '@dualbox/dualbox';
var pkgDesc = require('../package.json');

class DisplayImg extends UIComponent {
    constructor(pkgDesc, appDesc, options) {
        super(pkgDesc, appDesc, options)


    }

    hide(){
        $(this.div).hide();
    }

    show(){
        $(this.div).show();
    }

    onReady() {
        $(this.div).attr("src", this.inputValue["dataURL"] );
        this.trigger({});
    }

    static attachTo(appDesc, attrs, div) {
        // build image from package.json desc
        var dt = new DisplayImg(pkgDesc, appDesc, attrs);
        var params = {class:"dualbox db-img"};
        if(dt.attr.width){
            params.width = dt.attr.width.toString();
        }
        if(dt.attr.height){
            params.height = dt.attr.height.toString();
        }
        dt.div = $('<img/>', params);

        // append to param div and return the image
        $(div).append(dt.div);
        return dt;
    }
}

module.exports = DisplayImg;
